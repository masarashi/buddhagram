<h2><%= @spot.name %></h2>

<table class="table">
  <tr>
    <th>名称</th>
    <td><%= @spot.name %></td>
  </tr>
  <tr>
    <th>所在地</th>
    <td><%= @spot.address %></td>
  </tr>
  <tr>
    <th>地図</th>
    <td><div id='map'></div></td>
  </tr>
</table>

<script>
  let map

  function initMap(){
    
    LatLng = { lat: <%= @spot.latitude %>, lng: <%= @spot.longitude %> };

    map = new google.maps.Map(document.getElementById('map'), {
      center: LatLng,
      zoom: 15,
    });

    marker = new google.maps.Marker({
      position: LatLng,
      map: map
    });
  }
</script>

<div class="text-center">
  <%= link_to "編集", edit_spot_path, class: "btn btn-outline-secondary btn-sm" %>
  <%= link_to "削除", edit_spot_path, method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-outline-danger btn-sm" %>
</div>

<h4>所蔵する国宝彫刻</h4>

<% if @spot.statues.empty? %>
  データがありません
<% else %>
  <ul>
    <% @spot.statues.each do |statue| %>
      <li><%= link_to statue.name, statue %></li>
    <% end %>
  </ul>
<% end %>

<h4>この場所の投稿</h4>

<% if @spot.posts.empty? %>
  投稿はまだありません
<% else %>
  <div class="row">
    <%= render partial: "users/post", collection: @spot.posts %>
  </div>
<% end %>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= Rails.application.credentials.gmap[:api_key] %>&callback=initMap" async defer></script>
