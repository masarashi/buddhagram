<%= link_to '投稿する', new_post_path %>

<div>
  <hr>
  <% @posts.each do |post| %>
    <div>
      <%= link_to post.user.name, post.user %>
    </div>
    <div>
      <%= post.content %>
      <%= post.created_at %>
    </div>
    <div>
      <p>いいねの数：<%= post.likes_count(post) %></p>
    </div>
    <div>
      <% if user_signed_in? %>
        <% if current_user.already_liked?(post) %>
          <%= button_to 'いいねを取り消す', post_like_path(post, post.likes), method: :delete %>
        <% else %>
          <%= button_to 'いいね', post_likes_path(post) %>
        <% end %>
      <% end %>
      <p>いいねしたユーザ：
        <% post.liked_users.each do |user| %>
          <%= link_to user.name, user %>
        <% end %>
      </p>
    </div>
    <%= link_to 'コメント', post %>
    <hr>
  <% end %>
</div>
